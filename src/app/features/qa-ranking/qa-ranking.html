<div class="qa-container">
  <h1 class="title"> Quiz de Cultura General 🧠</h1>

  <div *ngIf="showSuccess" class="success-message">
    🎉 ¡Felicitaciones! Tu puntuación es {{ score }}/12. El quiz se reiniciará automáticamente para el siguiente participante. 🎉
  </div>

  <form [formGroup]="quizForm" (ngSubmit)="onSubmit()" class="quiz-form">
    <div class="form-group">
      <label for="userName">Nombre:</label>
      <input type="text" id="userName" formControlName="userName" class="form-control">
    </div>

    <div class="progress">
      Pregunta {{ currentQuestionIndex + 1 }} de {{ questions.length }}
    </div>

    <div class="question-container">
      <div class="question-block">
        <h3>{{ questions[currentQuestionIndex].question }}</h3>
        <div class="options">
          <label *ngFor="let option of questions[currentQuestionIndex].options; let j = index" class="option">
            <input type="radio" [value]="j" formControlName="q{{currentQuestionIndex}}" name="q{{currentQuestionIndex}}">
            {{ option }}
          </label>
        </div>
      </div>
    </div>

    <div class="navigation-buttons">
      <button type="button" (click)="prevQuestion()" [disabled]="currentQuestionIndex === 0" class="nav-btn">Anterior</button>
      <button type="button" (click)="nextQuestion()" [disabled]="currentQuestionIndex === questions.length - 1 || quizForm.value['q' + currentQuestionIndex] === ''" class="nav-btn">Siguiente</button>
    </div>

    <div class="buttons" *ngIf="currentQuestionIndex === questions.length - 1">
      <button type="submit" [disabled]="!quizForm.valid" class="submit-btn">Enviar Respuestas</button>
      <button type="button" (click)="resetQuiz()" class="reset-btn">Reiniciar Quiz</button>
    </div>
  </form>

  <div class="ranking-container">
    <h2> Ranking Top 10 🏆</h2>
    <table class="ranking-table">
      <thead>
        <tr>
          <th>Posición</th>
          <th>Nombre</th>
          <th>Puntuación</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let score of ranking; let i = index">
          <td>
            <span *ngIf="i === 0">🥇</span>
            <span *ngIf="i === 1">🥈</span>
            <span *ngIf="i === 2">🥉</span>
            <span *ngIf="i > 2">{{ i + 1 }}</span>
          </td>
          <td>{{ score.name }}</td>
          <td>{{ score.score }}/12</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>